{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_util_isScheduler,_util_isArray,_OuterSubscriber,_util_subscribeToResult,_fromArray PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isScheduler } from '../util/isScheduler';\nimport { isArray } from '../util/isArray';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { fromArray } from './fromArray';\nvar NONE = {};\nexport function combineLatest() {\n  var observables = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    observables[_i] = arguments[_i];\n  }\n  var resultSelector = null;\n  var scheduler = null;\n  if (isScheduler(observables[observables.length - 1])) {\n    scheduler = observables.pop();\n  }\n  if (typeof observables[observables.length - 1] === 'function') {\n    resultSelector = observables.pop();\n  }\n  if (observables.length === 1 && isArray(observables[0])) {\n    observables = observables[0];\n  }\n  return fromArray(observables, scheduler).lift(new CombineLatestOperator(resultSelector));\n}\nvar CombineLatestOperator = /*@__PURE__*/function () {\n  function CombineLatestOperator(resultSelector) {\n    this.resultSelector = resultSelector;\n  }\n  CombineLatestOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new CombineLatestSubscriber(subscriber, this.resultSelector));\n  };\n  return CombineLatestOperator;\n}();\nexport { CombineLatestOperator };\nvar CombineLatestSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(CombineLatestSubscriber, _super);\n  function CombineLatestSubscriber(destination, resultSelector) {\n    var _this = _super.call(this, destination) || this;\n    _this.resultSelector = resultSelector;\n    _this.active = 0;\n    _this.values = [];\n    _this.observables = [];\n    return _this;\n  }\n  CombineLatestSubscriber.prototype._next = function (observable) {\n    this.values.push(NONE);\n    this.observables.push(observable);\n  };\n  CombineLatestSubscriber.prototype._complete = function () {\n    var observables = this.observables;\n    var len = observables.length;\n    if (len === 0) {\n      this.destination.complete();\n    } else {\n      this.active = len;\n      this.toRespond = len;\n      for (var i = 0; i < len; i++) {\n        var observable = observables[i];\n        this.add(subscribeToResult(this, observable, observable, i));\n      }\n    }\n  };\n  CombineLatestSubscriber.prototype.notifyComplete = function (unused) {\n    if ((this.active -= 1) === 0) {\n      this.destination.complete();\n    }\n  };\n  CombineLatestSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n    var values = this.values;\n    var oldVal = values[outerIndex];\n    var toRespond = !this.toRespond ? 0 : oldVal === NONE ? --this.toRespond : this.toRespond;\n    values[outerIndex] = innerValue;\n    if (toRespond === 0) {\n      if (this.resultSelector) {\n        this._tryResultSelector(values);\n      } else {\n        this.destination.next(values.slice());\n      }\n    }\n  };\n  CombineLatestSubscriber.prototype._tryResultSelector = function (values) {\n    var result;\n    try {\n      result = this.resultSelector.apply(this, values);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(result);\n  };\n  return CombineLatestSubscriber;\n}(OuterSubscriber);\nexport { CombineLatestSubscriber };","map":{"version":3,"names":["tslib_1","isScheduler","isArray","OuterSubscriber","subscribeToResult","fromArray","NONE","combineLatest","_i","arguments","length","resultSelector","scheduler","observables","pop","lift","CombineLatestOperator","prototype","call","subscriber","source","subscribe","CombineLatestSubscriber","_super","__extends","destination","_this","active","values","_next","observable","push","_complete","len","complete","toRespond","i","add","notifyComplete","unused","notifyNext","outerValue","innerValue","outerIndex","innerIndex","innerSub","oldVal","_tryResultSelector","next","slice","result","apply","err","error"],"sources":["../../../src/internal/observable/combineLatest.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}