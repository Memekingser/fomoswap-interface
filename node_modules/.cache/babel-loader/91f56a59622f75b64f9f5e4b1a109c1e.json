{"ast":null,"code":"import{JSBI,Token}from'fomoswap-bera1';import React,{useCallback,useContext,useMemo,useState,useEffect}from'react';import{ThemeContext}from'styled-components';import{AutoColumn}from'../../components/Column';import{AutoRow}from'../../components/Row';import{SearchInput}from'../../components/SearchModal/styleds';import{useAllTokenV1Exchanges}from'../../data/V1';import{useActiveWeb3React}from'../../hooks';import{useAllTokens,useToken}from'../../hooks/Tokens';import{useDefaultTokenList}from'../../state/lists/hooks';import{useTokenBalancesWithLoadingIndicator}from'../../state/wallet/hooks';import{BackArrow,TYPE}from'../../theme';import{LightCard}from'../../components/Card';import{BodyWrapper}from'../AppBody';import{EmptyState}from'./EmptyState';import V1PositionCard from'../../components/PositionCard/V1';import QuestionHelper from'../../components/QuestionHelper';import{Dots}from'../../components/swap/styleds';import{useAddUserToken}from'../../state/user/hooks';import{isDefaultToken}from'../../utils';export default function MigrateV1(){var _Object$keys;const theme=useContext(ThemeContext);const{account,chainId}=useActiveWeb3React();const[tokenSearch,setTokenSearch]=useState('');const handleTokenSearchChange=useCallback(e=>setTokenSearch(e.target.value),[setTokenSearch]);// automatically add the search token\nconst token=useToken(tokenSearch);const defaultTokens=useDefaultTokenList();const isDefault=isDefaultToken(defaultTokens,token);const allTokens=useAllTokens();const addToken=useAddUserToken();useEffect(()=>{if(token&&!isDefault&&!allTokens[token.address]){addToken(token);}},[token,isDefault,addToken,allTokens]);// get V1 LP balances\nconst V1Exchanges=useAllTokenV1Exchanges();const V1LiquidityTokens=useMemo(()=>{return Object.keys(V1Exchanges).map(exchangeAddress=>new Token(chainId,exchangeAddress,18,'UNI-V1','Uniswap V1'));},[chainId,V1Exchanges]);const[V1LiquidityBalances,V1LiquidityBalancesLoading]=useTokenBalancesWithLoadingIndicator(account,V1LiquidityTokens);const allV1PairsWithLiquidity=V1LiquidityTokens.filter(V1LiquidityToken=>{return(V1LiquidityBalances===null||V1LiquidityBalances===void 0?void 0:V1LiquidityBalances[V1LiquidityToken.address])&&JSBI.greaterThan(V1LiquidityBalances[V1LiquidityToken.address].raw,JSBI.BigInt(0));}).map(V1LiquidityToken=>{return/*#__PURE__*/React.createElement(V1PositionCard,{key:V1LiquidityToken.address,token:V1Exchanges[V1LiquidityToken.address],V1LiquidityBalance:V1LiquidityBalances[V1LiquidityToken.address]});});// should never always be false, because a V1 exhchange exists for WETH on all testnets\nconst isLoading=((_Object$keys=Object.keys(V1Exchanges))===null||_Object$keys===void 0?void 0:_Object$keys.length)===0||V1LiquidityBalancesLoading;return/*#__PURE__*/React.createElement(BodyWrapper,{style:{padding:24}},/*#__PURE__*/React.createElement(AutoColumn,{gap:\"16px\"},/*#__PURE__*/React.createElement(AutoRow,{style:{alignItems:'center',justifyContent:'space-between'},gap:\"8px\"},/*#__PURE__*/React.createElement(BackArrow,{to:\"/pool\"}),/*#__PURE__*/React.createElement(TYPE.mediumHeader,null,\"Migrate V1 Liquidity\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(QuestionHelper,{text:\"Migrate your liquidity tokens from Uniswap V1 to Uniswap V2.\"}))),/*#__PURE__*/React.createElement(TYPE.body,{style:{marginBottom:8,fontWeight:400}},\"For each pool shown below, click migrate to remove your liquidity from Uniswap V1 and deposit it into Uniswap V2.\"),!account?/*#__PURE__*/React.createElement(LightCard,{padding:\"40px\"},/*#__PURE__*/React.createElement(TYPE.body,{color:theme.text3,textAlign:\"center\"},\"Connect to a wallet to view your V1 liquidity.\")):isLoading?/*#__PURE__*/React.createElement(LightCard,{padding:\"40px\"},/*#__PURE__*/React.createElement(TYPE.body,{color:theme.text3,textAlign:\"center\"},/*#__PURE__*/React.createElement(Dots,null,\"Loading\"))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(AutoRow,null,/*#__PURE__*/React.createElement(SearchInput,{value:tokenSearch,onChange:handleTokenSearchChange,placeholder:\"Enter a token address to find liquidity\"})),(allV1PairsWithLiquidity===null||allV1PairsWithLiquidity===void 0?void 0:allV1PairsWithLiquidity.length)>0?/*#__PURE__*/React.createElement(React.Fragment,null,allV1PairsWithLiquidity):/*#__PURE__*/React.createElement(EmptyState,{message:\"No V1 Liquidity found.\"}))));}","map":{"version":3,"names":["JSBI","Token","React","useCallback","useContext","useMemo","useState","useEffect","ThemeContext","AutoColumn","AutoRow","SearchInput","useAllTokenV1Exchanges","useActiveWeb3React","useAllTokens","useToken","useDefaultTokenList","useTokenBalancesWithLoadingIndicator","BackArrow","TYPE","LightCard","BodyWrapper","EmptyState","V1PositionCard","QuestionHelper","Dots","useAddUserToken","isDefaultToken","MigrateV1","_Object$keys","theme","account","chainId","tokenSearch","setTokenSearch","handleTokenSearchChange","e","target","value","token","defaultTokens","isDefault","allTokens","addToken","address","V1Exchanges","V1LiquidityTokens","Object","keys","map","exchangeAddress","V1LiquidityBalances","V1LiquidityBalancesLoading","allV1PairsWithLiquidity","filter","V1LiquidityToken","greaterThan","raw","BigInt","createElement","key","V1LiquidityBalance","isLoading","length","style","padding","gap","alignItems","justifyContent","to","mediumHeader","text","body","marginBottom","fontWeight","color","text3","textAlign","Fragment","onChange","placeholder","message"],"sources":["/Users/synallage/Desktop/fomoswap-uni/interface-73580de922ce3ff642430d71aa24f5c053e6dd4d/src/pages/MigrateV1/index.tsx"],"sourcesContent":["import { JSBI, Token } from 'fomoswap-bera1'\nimport React, { useCallback, useContext, useMemo, useState, useEffect } from 'react'\nimport { ThemeContext } from 'styled-components'\nimport { AutoColumn } from '../../components/Column'\nimport { AutoRow } from '../../components/Row'\nimport { SearchInput } from '../../components/SearchModal/styleds'\nimport { useAllTokenV1Exchanges } from '../../data/V1'\nimport { useActiveWeb3React } from '../../hooks'\nimport { useAllTokens, useToken } from '../../hooks/Tokens'\nimport { useDefaultTokenList } from '../../state/lists/hooks'\nimport { useTokenBalancesWithLoadingIndicator } from '../../state/wallet/hooks'\nimport { BackArrow, TYPE } from '../../theme'\nimport { LightCard } from '../../components/Card'\nimport { BodyWrapper } from '../AppBody'\nimport { EmptyState } from './EmptyState'\nimport V1PositionCard from '../../components/PositionCard/V1'\nimport QuestionHelper from '../../components/QuestionHelper'\nimport { Dots } from '../../components/swap/styleds'\nimport { useAddUserToken } from '../../state/user/hooks'\nimport { isDefaultToken } from '../../utils'\n\nexport default function MigrateV1() {\n  const theme = useContext(ThemeContext)\n  const { account, chainId } = useActiveWeb3React()\n\n  const [tokenSearch, setTokenSearch] = useState<string>('')\n  const handleTokenSearchChange = useCallback(e => setTokenSearch(e.target.value), [setTokenSearch])\n\n  // automatically add the search token\n  const token = useToken(tokenSearch)\n  const defaultTokens = useDefaultTokenList()\n  const isDefault = isDefaultToken(defaultTokens, token)\n  const allTokens = useAllTokens()\n  const addToken = useAddUserToken()\n  useEffect(() => {\n    if (token && !isDefault && !allTokens[token.address]) {\n      addToken(token)\n    }\n  }, [token, isDefault, addToken, allTokens])\n\n  // get V1 LP balances\n  const V1Exchanges = useAllTokenV1Exchanges()\n  const V1LiquidityTokens: Token[] = useMemo(() => {\n    return Object.keys(V1Exchanges).map(\n      exchangeAddress => new Token(chainId, exchangeAddress, 18, 'UNI-V1', 'Uniswap V1')\n    )\n  }, [chainId, V1Exchanges])\n  const [V1LiquidityBalances, V1LiquidityBalancesLoading] = useTokenBalancesWithLoadingIndicator(\n    account,\n    V1LiquidityTokens\n  )\n  const allV1PairsWithLiquidity = V1LiquidityTokens.filter(V1LiquidityToken => {\n    return (\n      V1LiquidityBalances?.[V1LiquidityToken.address] &&\n      JSBI.greaterThan(V1LiquidityBalances[V1LiquidityToken.address].raw, JSBI.BigInt(0))\n    )\n  }).map(V1LiquidityToken => {\n    return (\n      <V1PositionCard\n        key={V1LiquidityToken.address}\n        token={V1Exchanges[V1LiquidityToken.address]}\n        V1LiquidityBalance={V1LiquidityBalances[V1LiquidityToken.address]}\n      />\n    )\n  })\n\n  // should never always be false, because a V1 exhchange exists for WETH on all testnets\n  const isLoading = Object.keys(V1Exchanges)?.length === 0 || V1LiquidityBalancesLoading\n\n  return (\n    <BodyWrapper style={{ padding: 24 }}>\n      <AutoColumn gap=\"16px\">\n        <AutoRow style={{ alignItems: 'center', justifyContent: 'space-between' }} gap=\"8px\">\n          <BackArrow to=\"/pool\" />\n          <TYPE.mediumHeader>Migrate V1 Liquidity</TYPE.mediumHeader>\n          <div>\n            <QuestionHelper text=\"Migrate your liquidity tokens from Uniswap V1 to Uniswap V2.\" />\n          </div>\n        </AutoRow>\n\n        <TYPE.body style={{ marginBottom: 8, fontWeight: 400 }}>\n          For each pool shown below, click migrate to remove your liquidity from Uniswap V1 and deposit it into Uniswap\n          V2.\n        </TYPE.body>\n\n        {!account ? (\n          <LightCard padding=\"40px\">\n            <TYPE.body color={theme.text3} textAlign=\"center\">\n              Connect to a wallet to view your V1 liquidity.\n            </TYPE.body>\n          </LightCard>\n        ) : isLoading ? (\n          <LightCard padding=\"40px\">\n            <TYPE.body color={theme.text3} textAlign=\"center\">\n              <Dots>Loading</Dots>\n            </TYPE.body>\n          </LightCard>\n        ) : (\n          <>\n            <AutoRow>\n              <SearchInput\n                value={tokenSearch}\n                onChange={handleTokenSearchChange}\n                placeholder=\"Enter a token address to find liquidity\"\n              />\n            </AutoRow>\n            {allV1PairsWithLiquidity?.length > 0 ? (\n              <>{allV1PairsWithLiquidity}</>\n            ) : (\n              <EmptyState message=\"No V1 Liquidity found.\" />\n            )}\n          </>\n        )}\n      </AutoColumn>\n    </BodyWrapper>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}