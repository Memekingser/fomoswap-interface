{"ast":null,"code":"import{TokenAmount,Pair}from'fomoswap-artio';import{useMemo}from'react';import{abi as IUniswapV2PairABI}from'@uniswap/v2-core/build/IUniswapV2Pair.json';import{Interface}from'@ethersproject/abi';import{useActiveWeb3React}from'../hooks';import{useMultipleContractSingleData}from'../state/multicall/hooks';import{wrappedCurrency}from'../utils/wrappedCurrency';const PAIR_INTERFACE=new Interface(IUniswapV2PairABI);export let PairState;(function(PairState){PairState[PairState[\"LOADING\"]=0]=\"LOADING\";PairState[PairState[\"NOT_EXISTS\"]=1]=\"NOT_EXISTS\";PairState[PairState[\"EXISTS\"]=2]=\"EXISTS\";PairState[PairState[\"INVALID\"]=3]=\"INVALID\";})(PairState||(PairState={}));export function usePairs(currencies){const{chainId}=useActiveWeb3React();const tokens=useMemo(()=>currencies.map(_ref=>{let[currencyA,currencyB]=_ref;return[wrappedCurrency(currencyA,chainId),wrappedCurrency(currencyB,chainId)];}),[chainId,currencies]);const pairAddresses=useMemo(()=>tokens.map(_ref2=>{let[tokenA,tokenB]=_ref2;return tokenA&&tokenB&&!tokenA.equals(tokenB)?Pair.getAddress(tokenA,tokenB):undefined;}),[tokens]);const results=useMultipleContractSingleData(pairAddresses,PAIR_INTERFACE,'getReserves');return useMemo(()=>{return results.map((result,i)=>{const{result:reserves,loading}=result;const tokenA=tokens[i][0];const tokenB=tokens[i][1];if(loading)return[PairState.LOADING,null];if(!tokenA||!tokenB||tokenA.equals(tokenB))return[PairState.INVALID,null];if(!reserves)return[PairState.NOT_EXISTS,null];const{reserve0,reserve1}=reserves;const[token0,token1]=tokenA.sortsBefore(tokenB)?[tokenA,tokenB]:[tokenB,tokenA];return[PairState.EXISTS,new Pair(new TokenAmount(token0,reserve0.toString()),new TokenAmount(token1,reserve1.toString()))];});},[results,tokens]);}export function usePair(tokenA,tokenB){return usePairs([[tokenA,tokenB]])[0];}","map":{"version":3,"names":["TokenAmount","Pair","useMemo","abi","IUniswapV2PairABI","Interface","useActiveWeb3React","useMultipleContractSingleData","wrappedCurrency","PAIR_INTERFACE","PairState","usePairs","currencies","chainId","tokens","map","_ref","currencyA","currencyB","pairAddresses","_ref2","tokenA","tokenB","equals","getAddress","undefined","results","result","i","reserves","loading","LOADING","INVALID","NOT_EXISTS","reserve0","reserve1","token0","token1","sortsBefore","EXISTS","toString","usePair"],"sources":["/Users/synallage/Desktop/fomoswap-uni/interface-73580de922ce3ff642430d71aa24f5c053e6dd4d/src/data/Reserves.ts"],"sourcesContent":["import { TokenAmount, Pair, Currency } from 'fomoswap-artio'\nimport { useMemo } from 'react'\nimport { abi as IUniswapV2PairABI } from '@uniswap/v2-core/build/IUniswapV2Pair.json'\nimport { Interface } from '@ethersproject/abi'\nimport { useActiveWeb3React } from '../hooks'\n\nimport { useMultipleContractSingleData } from '../state/multicall/hooks'\nimport { wrappedCurrency } from '../utils/wrappedCurrency'\n\nconst PAIR_INTERFACE = new Interface(IUniswapV2PairABI)\n\nexport enum PairState {\n  LOADING,\n  NOT_EXISTS,\n  EXISTS,\n  INVALID\n}\n\nexport function usePairs(currencies: [Currency | undefined, Currency | undefined][]): [PairState, Pair | null][] {\n  const { chainId } = useActiveWeb3React()\n\n  const tokens = useMemo(\n    () =>\n      currencies.map(([currencyA, currencyB]) => [\n        wrappedCurrency(currencyA, chainId),\n        wrappedCurrency(currencyB, chainId)\n      ]),\n    [chainId, currencies]\n  )\n\n  const pairAddresses = useMemo(\n    () =>\n      tokens.map(([tokenA, tokenB]) => {\n        return tokenA && tokenB && !tokenA.equals(tokenB) ? Pair.getAddress(tokenA, tokenB) : undefined\n      }),\n    [tokens]\n  )\n\n  const results = useMultipleContractSingleData(pairAddresses, PAIR_INTERFACE, 'getReserves')\n\n  return useMemo(() => {\n    return results.map((result, i) => {\n      const { result: reserves, loading } = result\n      const tokenA = tokens[i][0]\n      const tokenB = tokens[i][1]\n\n      if (loading) return [PairState.LOADING, null]\n      if (!tokenA || !tokenB || tokenA.equals(tokenB)) return [PairState.INVALID, null]\n      if (!reserves) return [PairState.NOT_EXISTS, null]\n      const { reserve0, reserve1 } = reserves\n      const [token0, token1] = tokenA.sortsBefore(tokenB) ? [tokenA, tokenB] : [tokenB, tokenA]\n      return [\n        PairState.EXISTS,\n        new Pair(new TokenAmount(token0, reserve0.toString()), new TokenAmount(token1, reserve1.toString()))\n      ]\n    })\n  }, [results, tokens])\n}\n\nexport function usePair(tokenA?: Currency, tokenB?: Currency): [PairState, Pair | null] {\n  return usePairs([[tokenA, tokenB]])[0]\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}