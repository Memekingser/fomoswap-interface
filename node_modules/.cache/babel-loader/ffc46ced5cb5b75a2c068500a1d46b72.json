{"ast":null,"code":"import{useCallback,useMemo}from'react';import{useDispatch,useSelector}from'react-redux';import{useActiveWeb3React}from'../../hooks';import{addTransaction}from'./actions';// helper that can take a ethers library transaction response and add it to the list of transactions\nexport function useTransactionAdder(){const{chainId,account}=useActiveWeb3React();const dispatch=useDispatch();return useCallback(function(response){let{summary,approval}=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!account)return;if(!chainId)return;const{hash}=response;if(!hash){throw Error('No transaction hash found.');}dispatch(addTransaction({hash,from:account,chainId,approval,summary}));},[dispatch,chainId,account]);}// returns all the transactions for the current chain\nexport function useAllTransactions(){var _state$chainId;const{chainId}=useActiveWeb3React();const state=useSelector(state=>state.transactions);return chainId?(_state$chainId=state[chainId])!==null&&_state$chainId!==void 0?_state$chainId:{}:{};}export function useIsTransactionPending(transactionHash){const transactions=useAllTransactions();if(!transactionHash||!transactions[transactionHash])return false;return!transactions[transactionHash].receipt;}// returns whether a token has a pending approval transaction\nexport function useHasPendingApproval(tokenAddress,spender){const allTransactions=useAllTransactions();return useMemo(()=>typeof tokenAddress==='string'&&typeof spender==='string'&&Object.keys(allTransactions).some(hash=>{var _allTransactions$hash;if((_allTransactions$hash=allTransactions[hash])===null||_allTransactions$hash===void 0?void 0:_allTransactions$hash.receipt){return false;}else{var _allTransactions$hash2,_allTransactions$hash3,_allTransactions$hash4,_allTransactions$hash5;return((_allTransactions$hash2=allTransactions[hash])===null||_allTransactions$hash2===void 0?void 0:(_allTransactions$hash3=_allTransactions$hash2.approval)===null||_allTransactions$hash3===void 0?void 0:_allTransactions$hash3.tokenAddress)===tokenAddress&&((_allTransactions$hash4=allTransactions[hash])===null||_allTransactions$hash4===void 0?void 0:(_allTransactions$hash5=_allTransactions$hash4.approval)===null||_allTransactions$hash5===void 0?void 0:_allTransactions$hash5.spender)===spender;}}),[allTransactions,spender,tokenAddress]);}","map":{"version":3,"names":["useCallback","useMemo","useDispatch","useSelector","useActiveWeb3React","addTransaction","useTransactionAdder","chainId","account","dispatch","response","summary","approval","arguments","length","undefined","hash","Error","from","useAllTransactions","_state$chainId","state","transactions","useIsTransactionPending","transactionHash","receipt","useHasPendingApproval","tokenAddress","spender","allTransactions","Object","keys","some","_allTransactions$hash","_allTransactions$hash2","_allTransactions$hash3","_allTransactions$hash4","_allTransactions$hash5"],"sources":["/Users/synallage/Desktop/fomoswap-uni/interface-73580de922ce3ff642430d71aa24f5c053e6dd4d/src/state/transactions/hooks.tsx"],"sourcesContent":["import { TransactionResponse } from '@ethersproject/providers'\nimport { useCallback, useMemo } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport { useActiveWeb3React } from '../../hooks'\nimport { AppDispatch, AppState } from '../index'\nimport { addTransaction } from './actions'\nimport { TransactionDetails } from './reducer'\n\n// helper that can take a ethers library transaction response and add it to the list of transactions\nexport function useTransactionAdder(): (\n  response: TransactionResponse,\n  customData?: { summary?: string; approval?: { tokenAddress: string; spender: string } }\n) => void {\n  const { chainId, account } = useActiveWeb3React()\n  const dispatch = useDispatch<AppDispatch>()\n\n  return useCallback(\n    (\n      response: TransactionResponse,\n      { summary, approval }: { summary?: string; approval?: { tokenAddress: string; spender: string } } = {}\n    ) => {\n      if (!account) return\n      if (!chainId) return\n\n      const { hash } = response\n      if (!hash) {\n        throw Error('No transaction hash found.')\n      }\n      dispatch(addTransaction({ hash, from: account, chainId, approval, summary }))\n    },\n    [dispatch, chainId, account]\n  )\n}\n\n// returns all the transactions for the current chain\nexport function useAllTransactions(): { [txHash: string]: TransactionDetails } {\n  const { chainId } = useActiveWeb3React()\n\n  const state = useSelector<AppState, AppState['transactions']>(state => state.transactions)\n\n  return chainId ? state[chainId] ?? {} : {}\n}\n\nexport function useIsTransactionPending(transactionHash?: string): boolean {\n  const transactions = useAllTransactions()\n\n  if (!transactionHash || !transactions[transactionHash]) return false\n\n  return !transactions[transactionHash].receipt\n}\n\n// returns whether a token has a pending approval transaction\nexport function useHasPendingApproval(tokenAddress: string | undefined, spender: string | undefined): boolean {\n  const allTransactions = useAllTransactions()\n  return useMemo(\n    () =>\n      typeof tokenAddress === 'string' &&\n      typeof spender === 'string' &&\n      Object.keys(allTransactions).some(hash => {\n        if (allTransactions[hash]?.receipt) {\n          return false\n        } else {\n          return (\n            allTransactions[hash]?.approval?.tokenAddress === tokenAddress &&\n            allTransactions[hash]?.approval?.spender === spender\n          )\n        }\n      }),\n    [allTransactions, spender, tokenAddress]\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}